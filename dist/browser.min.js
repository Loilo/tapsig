var tapsig=function(t){"use strict";var e=(t,...e)=>{t&&console.log(..."string"==typeof e[0]?[`[tapsig] ${e[0]}`,...e.slice(1)]:e)};const n=Symbol("Proxy target"),o=Symbol("Promise marker"),r=Symbol("Catch all"),c=Symbol("Catch missing");function i(t){return!("object"!=typeof t&&"function"!=typeof t||null===t||t instanceof Promise)}function f(t,a,s,p){if(t instanceof Promise)return u(t)?t:(t[o]=!0,t.then(t=>f(t,a,s,p)));if(!i(t)||Reflect.has(t,n))return t;return e(p,"tap %o",t),new Proxy(t,{has:(t,e)=>e===n||Reflect.has(t,e),construct:(t,n)=>(e(p,"construct %o with %o",t,n),f(Reflect.construct(t,n),a,null,p)),get(o,i){if(i===n)return o;e(p,"get %o from %o",i,o);const u=("function"==typeof a?a(o):a)||Object.create(null);if("function"!=typeof t||null!==u&&"toString"in u||(u.toString=function(){return String(l(this))}),u instanceof Object?u.hasOwnProperty(i):i in u){e(p,"property %o shadowed by injected %o",i,u);const t=function(t,e,n){const o=Object.getOwnPropertyDescriptor(n,e);return o&&"function"==typeof o.get?Reflect.apply(o.get,t,[]):Reflect.get(n,e)}(o,i,u);return f(t,a,"function"==typeof t?o:null,p)}if(u instanceof Object&&Reflect.has(u,r)){return e(p,"property %o caught by ALL",i),f(Reflect.apply(Reflect.get(u,r),o,[i]),a,o,p)}if(Reflect.has(o,i))return f(Reflect.get(o,i),a,null,p);if(u instanceof Object&&Reflect.has(u,c)){return e(p,"property %o caught by MISSING",i),f(Reflect.apply(Reflect.get(u,c),o,[i]),a,o,p)}},apply:(t,n,o)=>(e(p,"call %o with %o as %o",t,o,n),f(Reflect.apply(t,n,o),a,null,p))})}function l(t){return u(t)?t[n]:t}function u(t){return i(t)&&n in t||t instanceof Promise&&o in t}return t.ALL=r,t.MISSING=c,t.tap=function(t,e=Object.create(null),n=!1){return f(t,e,null,n)},t.untap=l,t.isTapped=u,t}({});
