var tapsig=function(t){"use strict";var e=(t,...e)=>{t&&console.log(..."string"==typeof e[0]?[`[tapsig] ${e[0]}`,...e.slice(1)]:e)};const n=Symbol("Proxy target"),c=Symbol("Catch all"),o=Symbol("Catch missing");function r(t){return("object"==typeof t||"function"==typeof t)&&null!==t}function l(t,f,u,a){if(!r(t)||Reflect.has(t,n))return t;return e(a,"tap %o",t),new Proxy(t,{has:(t,e)=>e===n||Reflect.has(t,e),construct:(t,n)=>(e(a,"construct %o with %o",t,n),l(Reflect.construct(t,n),f,null,a)),get(t,r){if(r===n)return t;e(a,"get %o from %o",r,t);const u=("function"==typeof f?f(t):f)||Object.create(null);if(u instanceof Object?u.hasOwnProperty(r):r in u){e(a,"property %o shadowed by injected %o",r,u);const n=function(t,e,n){const c=Object.getOwnPropertyDescriptor(n,e);return c&&"function"==typeof c.get?Reflect.apply(c.get,t,[]):Reflect.get(n,e)}(t,r,u);return l(n,f,"function"==typeof n?t:null,a)}if(u instanceof Object&&Reflect.has(u,c)){return e(a,"property %o caught by ALL",r),l(Reflect.apply(Reflect.get(u,c),t,[r]),f,t,a)}if(Reflect.has(t,r))return l(Reflect.get(t,r),f,null,a);if(u instanceof Object&&Reflect.has(u,o)){return e(a,"property %o caught by MISSING",r),l(Reflect.apply(Reflect.get(u,o),t,[r]),f,t,a)}},apply:(t,n,c)=>(e(a,"call %o with %o as %o",t,c,n),l(Reflect.apply(t,n,c),f,null,a))})}function f(t){return r(t)&&n in t}return t.ALL=c,t.MISSING=o,t.tap=function(t,e=Object.create(null),n=!1){return l(t,e,0,n)},t.untap=function(t){return f(t)?t[n]:t},t.isTapped=f,t}({});
